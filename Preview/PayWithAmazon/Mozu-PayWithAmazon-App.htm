<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="15" MadCap:lastHeight="488" MadCap:lastWidth="1168">
    <head><title>Pay with Amazon by Mozu</title>
        <meta name="author" content="Mozu" />
        <meta name="description" content="User content for Pay with Amazon Integration for Mozu" />
        <meta name="keywords" content="Pay with Amazon, Amazon, Mozu" />
		<link rel="shortcut icon" href="http://www.mozu.com/favicon.ico" />
		
		<!-- Required for Scrollspy -->
		<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/js/scrollspy.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/js/affix.js"></script>
		<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
		 <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?skin=sunburst">
        </script>
		<!-- Mozu CSS developed by Mozu Docs -->
		<link href="mozu-bootswatch.css" rel="stylesheet" type="text/css" />	
		
		<!-- Scrollspy active link script -->
		<script>
		$( document ).ready(function() {
		$('body').scrollspy({
			target: '.bs-docs-sidebar',
			offset: 20
		});
		});        
		</script>
		
		<!-- Anchor Ease Script -->
		<script>
		 $(function() {
			  $('a[href*=#]:not([href=#])').click(function() {
				if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') 
			&& location.hostname == this.hostname) {

				  var target = $(this.hash);
				  target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
				  if (target.length) {
					$('html,body').animate({
					  scrollTop: target.offset().top - 75 //offsets for fixed header
					}, 1000);
					return false;
				  }
				}
			  });
			  //Executed on page load with URL containing an anchor tag.
			  if($(location.href.split("#")[1])) {
				  var target = $('#'+location.href.split("#")[1]);
				  if (target.length) {
					$('html,body').animate({
					  scrollTop: target.offset().top - 75 //offset height of header here too.
					}, 1000);
					return false;
				  }
				}
		});
		</script>
		
		<!-- Affix Javascript -->
		
		<script>$(function(){
 
			var stickyElement = '.bs-docs-sidebar', 
			bottomElement = '.footer'; 
			
			if($( stickyElement ).length){
			$( stickyElement ).each(function(){
		   
			var fromTop = $( this ).offset().top,
		   
			fromBottom = $( document ).height()-($( this ).offset().top + $( this ).outerHeight()),
			
			stopOn = $( document ).height()-( $( bottomElement ).offset().top)+($( this ).outerHeight() - $( this ).height());
			
			if( (fromBottom-stopOn) > 200 ){
			
			$( this ).css('width', $( this ).width()).css('top', 0).css('position', '');
			
			$( this ).affix({
			offset: {
			
			top: fromTop,
			
			bottom: stopOn
			}
			
			}).on('affix.bs.affix', function(){ $( this ).css('top', 0).css('position', ''); });
			}
			
			$( window ).trigger('scroll');
			});
			}
		});
		</script>
	</head>
    <body>
	<div id="main">
	<div class="container">
		<!-- Top Nav - Mozu -->
			<nav class="navbar navbar-default navbar-fixed-top">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
                        </button> <a href="#"><img src="logo-m-red-medium.png" style="margin-top:3px;"/></a></div>
                    <div class="navbar-collapse collapse">
                        <ul class="nav navbar-nav navbar-right">
						<li><a href="versionhistory.html"><span>Version History</span></a></li>
							<li><a href="http://developer.mozu.com/content/learn/Introduction.htm"><span>Mozu Dev Center</span></a></li>
                        </ul>
                    </div>
                </div>
            </nav>
			
		<!--Side Navigation TOC -->
		<div class="row">
		<div class="landing-title">
			<h1>Pay with Amazon Configuration Guide</h1>	
		</div>
			<div class="col-md-3" >
				<nav class="bs-docs-sidebar" >
					<ul class="nav nav-stacked" >
						<div class="side-heading">Table of Contents</div>
							<li><a href="#intro">Welcome to Pay with Amazon and Mozu</a></li>
							<li><a href="#install">Install Pay with Amazon</a></li>
							<li><a href="#theme">Update Theme</a></li>							
							<li><a href="#configapp">Configure the App</a></li>
							<li><a href="#arcjs">Build and Test Your Arc.js App</a></li>
					</ul>
				</nav>
			</div>
                    
            <div class="col-md-9 content" >
                <!-- Documentation content -->
				<section id="intro">
					<h2>Welcome to Pay with Amazon and Mozu</h2>
					
					<p>Amazon Payments is a service that provides you with the ability to send payments for goods or services by using the payment methods already associated with your Amazon.com account. To make a payment, you can use a credit card, bank account, or Amazon Payments Account balance.
					</p>
					<div class="panel panel-info">
						<div class="panel-heading"><strong>Note:</strong> The Pay with Amazon Integration for Mozu requires that your site be updated to the <a href="https://github.com/Mozu/core-theme" target="_blank">Mozu Core 8</a> theme.</div>
						</div>
					
					<p><strong>Application Features:</strong></p>
                            <ul>
                            	<li>Adds Amazon Payments as an additional payment option to your shopping cart and checkout pages.</li>
                            	<li>Connects Mozu to your existing Amazon merchant account.</li>
                            	</ul> 

				</section>
				<section id="install">
					<h2>Install the Pay with Amazon Integration for Mozu on Your Tenant</h2>

					<p>Mozu offers two options for acquiring the Pay with Amazon Integration:</p>
					<ol>
						<li>Purchase the Pay with Amazon Certified Code Action from Mozu. A Mozu sales or professional services representative will install the application on your tenant.</li>
						<li>Build the application from the Mozu-provided code on <a href="https://github.com/Mozu/PayWithAmazon" target="_blank">GitHub</a> and install it to Mozu Dev Center. This option requires that you have Arc.js enabled on your tenant. Contact your sales or professional services representative for more information about enabling Arc.js.</li>
					</ol>

				</section>


				<section id="theme">				
                        <h2>Update Your Mozu Theme</h2>
						
						<p>Installing and configuring the Pay with Amazon app enables Amazon Payments functionality in Mozu Admin. However, to enable Amazon functionality on your storefront so that customers can use is, you must also merge theme changes to enable the Amazon workflow:</p>

						<ol>
							<li>Confirm that your site has been updated to use the Mozu Core 8 Theme. You can find the latest version of the <a href="https://github.com/Mozu/core-theme" target="_blank">Mozu Core</a> theme on GitHub.</li>
							<li>Navigate to the <a href="https://github.com/Mozu/PayWithAmazon-Theme" target="_blank">PayWithAmazon-Theme</a> repository on GitHub.</li>
							<li>Review and apply the changes made in our sample implementation to your own theme.<div class="panel panel-info">
							<div class="panel-heading"><strong>Tip:</strong> To see the differences between the sample implementation and your own theme, open the command line and run the <code>git diff</code> command, using the paths for the themes to be diffed.</div>
						</div></li>
						</ol>

						<p>For more information on working with themes, including modifying, uploading, installing, and applying a theme to your site, refer to the <a href="http://developer.mozu.com/learn/theme-development/quickstart" target="_blank">Theme Development Quickstart</a>.</p>
                        				
				</section>

				<section id="configapp">				
                        <h2>Configure the Application in Mozu Admin</h2>
						<p>Installing the Pay with Amazon integration adds several Amazon-specific configuration settings to your <strong>Payment &amp; Checkout</strong> options in Mozu Admin.</p>

						<ol>
							<li>In Mozu Admin, go to <strong>Settings</strong> &gt; <strong>Payment &amp; Checkout</strong>.</li>
							<li>Check the <strong>PayWithAmazon</strong> checkbox to display the configuration fields.</li>
							<li>Select the Amazon environment you wish to use:
					
								<ul>
									<li><strong>Sandbox</strong>&#8212;Use Amazon’s sandbox environment for testing your Pay with Amazon integration.</li>
									<li><strong>Production</strong>&#8212;Use a working Amazon environment that processes payments.</li>
								</ul>
								<div class="panel panel-info" style="margin-bottom:0">
						<div class="panel-heading"><strong>Note:</strong> This selection has nothing to do with Mozu production or sandbox environments. These options refer solely to Amazon's production and sandbox environments.
						</div></div>
							</li>
							<li>Enter the following values, which you can obtain from Amazon Seller Central (<a href="https://sellercentral.amazon.com/" target="_blank">https://sellercentral.amazon.com/</a>):
								<ul>
									<li><strong>Seller ID</strong></li>
									<li><strong>Client ID</strong></li>
									<li><strong>Applicaton ID</strong></li>
									<li><strong>AWS Access Key</strong></li>
									<li><strong>AWS Secret</strong></li>
								</ul>
							</li>
							<li>Select an <strong>AWS Region</strong>.</li>
							<li>Select an <strong>Order Processing</strong> method:
								<ul>
									<li><strong>Authorize and Capture on Order Placement</strong>&#8212;Authorize AND capture payment when an order is placed.</li>
									<li><strong>Authorize on Order Placement and Capture on Order Shipment</strong>&#8212;Authorize a payment when an order is placed, but do not capture the payment until the order has shipped.</li>
								</ul>
							</li>
							<li>Click <strong>Save</strong> to save your Pay with Amazon settings.</li>
						</ol>                        				
				</section>
				
				<section id="arcjs">

				<h2>Build and Test Your Arc.js App</h2>
<div class="panel panel-info" style="margin-bottom:0">
						<div class="panel-heading"><strong>Note:</strong> The following sections only apply if you have Arc.js enabled and are integrating this application in-house. Contact your Mozu representative to enable Arc.js on your tenant. If you installed the Pay with Amazon Certified Code Action from Mozu, you can disregard the remainder of this document.</div></div>
<h3 id="buildapp">Build Your Arc.js App</h3>
<p>Mozu provides sample code on GitHub for that you can clone, modify, and upload to your own version of a Pay with Amazon application. Mozu also provides a variety of open-sourced tools that help you quickly and easily complete this process. Refer to the readme in the <a href="https://github.com/Mozu/PayWithAmazon" target="_blank">Mozu/PayWithAmazon</a> repository for instructions on cloning, modifying, and installing the sample application.</p>

<h3 id="testapp">Test Your Arc.js App</h3>
<p>Testing any app is always a best practice, and is necessary if you have made any modifications to the sample code provided on GitHub.</p>
<h3>Enable Detailed Logging</h3>
<ol>
	<li>In Mozu Admin, go to <strong>Settings</strong> > <strong>System Administration</strong> > <strong>Action Management</strong> to display the <a href="http://developer.mozu.com/content/arcjs/JSON.htm" target="_blank">Action Management JSON Editor</a>.</li>
<li>Change <code>defaultLogLevel</code> to <code>"info"</code>.</li>
</ol>

<h3>Enable Negative Testing on Your Sandbox</h3>
<ol>
<li>In Mozu Admin, go to <strong>Settings</strong> > <strong>System Administration</strong> > <strong>Action Management</strong> to display the <a href="http://developer.mozu.com/content/arcjs/JSON.htm" target="_blank">Action Management JSON Editor</a>.</li>
<li>Under <code>embedded.commerce.payments.action.performPaymentInteraction</code> action, add the configuration to enable Auth &amp; Capture decline testing:</li>
<pre class="prettyprint" xml:space="preserve">
{
            "actionId": "embedded.commerce.payments.action.performPaymentInteraction",
            "contexts": [
                {
                    "customFunctions": [
                        {
                            "applicationKey": "<app key>",
                            "functionId": "embedded.commerce.payments.action.performPaymentInteraction",
                            "enabled": true,
                            "configuration" : { "payment" : {  "declineCapture": true, "declineAuth" : true } }
                        }
                    ]
                }
            ]
        }
</pre>
				</section>
						</div>
                    </div>
                </div>
           </div>
		</div>
        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <div class="pull-left footer__logo">
                            <a href="http://www.mozu.com" target="_blank"><img src="http://www.mozu.com/sites/all/themes/mozu_aurora/logo.png" style="padding-top:7px;"/></a>
                </div>
                <div class="pull-right footer__icons" style="padding-right:40px;">
				<a href="http://www.mozu.com/ecommerce-app-center" target="_blank"><button type="button" class="btn btn-primary btn-lg"><i class="fa fa-code-fork"></i></button></a><a href="http://www.mozu.com/contact"><button type="button" class="btn btn-primary btn-lg"><i class="fa fa-comments-o"></i></button></a><a href="http://www.mozu.com/contact"><button type="button" class="btn btn-primary btn-lg"><i class="fa fa-copyright"></i></button></a>
                </div>
            </div>
        </footer>
		
	<!-- Back to top -->
	<div class="scroll-top-wrapper ">
    <span class="scroll-top-inner">
        <i class="fa fa-2x fa-arrow-circle-up"></i>
    </span>
	</div>
	<!-- Back to top - show hide -->
	<script>
 
	$(function(){
	 
		$(document).on( 'scroll', function(){
	 
			if ($(window).scrollTop() > 100) {
				$('.scroll-top-wrapper').addClass('show');
			} else {
				$('.scroll-top-wrapper').removeClass('show');
			}
		});
	});
	</script>
	<!-- Back to top - to top -->
	<script>
 
	$(function(){
	 
		$(document).on( 'scroll', function(){
	 
			if ($(window).scrollTop() > 100) {
				$('.scroll-top-wrapper').addClass('show');
			} else {
				$('.scroll-top-wrapper').removeClass('show');
			}
		});
	 
		$('.scroll-top-wrapper').on('click', scrollToTop);
	});
	 
	function scrollToTop() {
		verticalOffset = typeof(verticalOffset) != 'undefined' ? verticalOffset : 0;
		element = $('body');
		offset = element.offset();
		offsetTop = offset.top;
		$('html, body').animate({scrollTop: offsetTop}, 500, 'linear');
	}
	</script>
</html>
